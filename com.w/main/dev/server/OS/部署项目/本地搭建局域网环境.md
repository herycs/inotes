# 本地搭建局域网环境

> 本次操作目的在于建立可被局域网下其他电脑访问的应用
>
> 访问受理者：虚拟机集群
>
> 访问转发者：Nginx(Window10平台)

目标：通过Nginx的反向代理功能实现对于Win平台端口的访问请求被转发至虚拟机集群

## 操作

1. 搭建虚拟机集群：采用VM软件建立虚拟机集群，同时配置好虚拟机对外网的访问，与主机的通信
    - Win平台的网络环境配置：网络适配器的IP及相关信息的填写
    - VM软件的网络：使用VM网络编辑器配置相关的网络设置
    - 开启相关端口：对外提供访问接口
2. 搭建服务器应用
    - 配置服务器端软件（Nginx, Tomcat)
    - 建立应用
3. 配置反向代理
    - 使用Nginx（Win平台）搭建反向代理设置

## 问题

1. 虚拟机和外网通信失败：网络配置问题，检查相关文件（例如：/etc/sysconf/network-script/ifcfg-ens33）
2. 虚拟机和主机通信失败：Net模式下，可能是Win平台的VM8适配器的IP地址等信息有误，建议使用诊断功能查看
3. 本地无法使用域名访问虚拟机应用：host文件中配置相关的域名-IP的映射
4. 本地无法使用IP访问虚拟机应用：检查端口设置（Nginx配置，可尝试修改端口），同时注意配置防火墙
5. 局域网主机无法访问本机的虚拟机集群：Win平台的防火墙的放通规则中是否允许被局域网中其他主机访问到

## 总结

网络通信问题关键点：

- 本地IP，DNS等信息：提供合法访问的能力，ID卡
- 路由：提供对外连接的路径
- 防火墙：管理对外访问请求的允许或拒绝

检测技术：ping 命令，telnet 命令，netstat 查看端口监听情况