# QA 

## 设计一个消息队列需要考虑的问题

通信（通信规范 ｜ 可靠交付 ｜ 完整性 ｜ 持久化）

架构（功能拆分 ｜ 协议解耦）

健壮（高可用 ｜ 容灾）

性能（高效）

使用（简洁 ｜ 灵活 ｜ 易扩展）

## CAP

C(一致性)、A(可用性)和P(分区容错性)

## 常规需要解决的问题

1.信息的发送者和接收者如何维持这个连接，如果一方的连接中断，这期间的数据如何防止丢失？

2.如何降低发送者和接收者的耦合度？

3.如何让Priority高的接收者先接到数据？

4.如何做到Load balance？有效均衡接收者的负载？

5.如何有效的将数据发送到相关的接收者？也就是说将接收者subscribe 不同的数据，如何做有效的filter。

6.如何做到可扩展，甚至将这个通信模块发到cluster上？

7.如何保证接收者接收到了完整，正确的数据？

AMDQ协议解决了以上的问题，而RabbitMQ实现了AMQP。

## 目前知名MQ

RabbitMQ

ZeroMQ

ActiveMQ

Kafka

Redis

[消息队列Rabbit MQ](http://www.uml.org.cn/zjjs/201805234.asp)

[MQ调研](https://www.bcoder.top/2020/01/26/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E8%B0%83%E7%A0%94/)