## 提升

### 策略

- 分层解耦

网络层 - 数据收发

消息层 - 序列化

逻辑层 – 调度

协议层 – 兼容

- 提升并发

异步模型

多级流水线

lock free/wait free

- CPU差异

工艺制作







加锁不加锁

无竞争：10ns - 单核1亿/s

竞争：100ns - 30核心1000万/s

CAS操作 

10ns

单核1亿/S

30核5000万/S

shared_ptr 拷贝

原子计数器

10ns

 内存解引用 • 100ns

• CPU核的一秒
 • 10亿纳秒
 • 1000万次内存解引用

• 一个RPC请求处理
 • 如果，涉及10次解引用
 • 那么，单核处理能力<100万/S



协议层 - 序列化&反序列化

逻辑层 - CS两端的不同处理逻辑

消息层 - 数据切为消息段，有长度用来判断切多少

网络层 - 多收多发，用满网卡