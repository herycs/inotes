# Nginx

## 认识

基于事件驱动，能并发处理百万级别的TCP连接，高度模块化也提供给了第三方扩展充足的空间

跨平台，使用OS的高效API提高自己性能

对Linux而言，Nginx支持sendfile系统调用，能高效的将数据分发到网络上去而无需将数据拷贝到用户态再发送

优势：

- 快：快速响应
- 高扩展：层次化，模块化，低耦合
- 高可用：worker独立，且可极快创建新worker继续未完成的任务
- 低内存消耗：内存中维护了一个Http连接分配的对象
- 高并发：单机10w
- 热部署：master | worker分离设计
- BSD协议：支持用户修改其源码

## 模块化

### 配置模块

### 核心模块

- core模块
- errlog模块
- events模块
- openssl模块
- http模块
- mail模块

## 事件驱动架构

### 事件驱动模型

事件---》事件分发者---》事件消费者

事件消费者被事件分发者短期调用，这也有了限制，事件消费者不能有阻塞行为，否则会长时间占用事件分发者导致其他事件得不到处理

### 请求多阶段异步处理

多阶段异步处理中对请求的处理采用分阶段的方式，一个阶段一个阶段处理

配合事件驱动架构能极大提高运行性能

请求阶段划分：

- 依据阻塞事件
- 依据阻塞方法调用时间
- 定时器划分
- 阻塞方法无法继续划分，使用独立进程执行

### 管理进程，多工作进程

优点：

1. 多核系统并发能力
2. 负载均衡
3. 管理进程负责管控工作进程

## 内存池设计

多个内存申请合并为一个

## 统一管道过滤器模式

## 如何实现高性能，高可用，高并发

## 加载过程

## 进程模型

## 事件驱动模型

## 如何解决惊群

## 锁