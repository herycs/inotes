# JVM Summary

# Java 类

> 1. **编写**--------------源代码
> 2. **编译**--------------目标代码
> 3. **解析**--------------内存结构
> 4. **实例化-**-----------使用内存结构
> 5. **销毁**

## 类的生命历程

1. 编写类，并测试通过----------***.java文件**(符合Java语法及规范的文件)

2. 编译为----------------------------***.class文**件(符合字节虚拟机字节码规范的文件)

    *.java文件（字符流）------词法分析器（符号流）------语法分析器（语法树）------中间代码生成器（中间代码）-------优化器（优化）----目标代码生成器（目标代码）

    还有贯穿始终的：出错处理和表格管理

3. JVM进行处理（加载，连接，初始化）--------------------**内存数据结构**

    - 加载
    - 连接
        - 验证（对数据流进行验证，是否符合格式规范和一些参数限制）
        - 准备（**方法区**静态变量分配内存，并设置初始值）
        - 解析（**常量池**中符号引用替换为直接引用）
    - 初始化
        - 依照程序员的要求初始化类数据
        - 初始化顺序：
            - 静态数据（静态变量+静态块）先父后子
            - 局部数据初始化（成员变量+块+构造器），先父后子

4. 实例化-----------------------**堆**上的对象实例（堆上有部分会因为年龄过大被转移到永久代（元数据区，方法区））

5. 卸载-----------------------移除类的内存结构（前提是不再存在任何对该类的引用）

