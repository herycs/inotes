# Java 项目部署到云服务器上

> 最近开始尝试将本地网页方到服务器上运行，但遇到了不少问题，在此记录下，我的服务器是购买的腾讯云的，购买其他服务器的仅可当本文为参考

# 1.部署前置条件

## 1.1购买服务器

> 一般新手而言都有优惠，可以找找学生优惠或者活动优惠

​	1.1.1购买链接：[腾讯云](https://cloud.tencent.com/?fromSource=gwzcw.2212127.2212127.2212127&utm_medium=cpd&utm_id=gwzcw.2212127.2212127.2212127)，[阿里云](https://www.aliyun.com/?utm_content=se_1003074876)，[百度云](https://cloud.baidu.com/campaign/ABCSale-2019/index.html?track=cp:npinzhuan|pf:pc|pp:npinzhuan-biaoti|pu:wenzineirong|ci:2019yzfh|kw:2143872#2)等等。

## 1.2购买域名

​	1.2.1购买链接：[腾讯云](https://dnspod.cloud.tencent.com/)，[阿里云](https://wanwang.aliyun.com/domain/com/?spm=5176.10695662.1158081.1.59854234H8fNvN&aly_as=0KgqA6Jl)等等。

## 1.3如果你不打算自己下载软件并部署到服务器上则跳过1.3节

### 1.3.1提前下载好软件压缩包，例如：tomcat...tar.gz，jdk...tar.gz

- 下载时要注意：下载服务器对应版本，例如：64位操作系统则下载64位对应的压缩包

  示例：jdk-XXX-linux-x86.tar.gz是针对32位的（下载此版本的部署到64位操作系统上可能出现问题），你需要下载jdk-XXX-linux-x64.tar.gz

### 1.3.2可能的错误处理

- 如果你的JDK部署没问题，按照网上的教程多次部署也有问题的话，检查你的压缩包是不是对应的x64或者x86，若确实是64位系统上安装了x86的软件则参考下面的解决方法

  [-bash: /usr/lib/jvm/jdk1.8.0_221/bin/java: No such file or directory](https://blog.csdn.net/qq_42070179/article/details/102420712)

## 1.4附加工具下载

[下载xshell和xshell的官网地址](https://www.netsarang.com/zh/)，练手之用的话下载免费的家庭/学生版基本够用了

### 1.4.1xshell

- 本地的一个小程序，可以连接向指定的服务器，可用作操作服务器的一个端口，有一定的安全性

### 1.4.2xftp

- 本地小程序，用于认证身份后向服务器传文件（如果你下载了压缩包，可以用这个将压缩包传到服务器上，项目也可以）

# 2.开始部署大环境

## 2.1虚拟机安装及镜像切换：

一般流程是我们需要在服务器实例上搭载虚拟机，这在购买服务器的时候就已经选好了，就是你选的CentOS，Ubuntu,Window等等。

如果你不喜欢购买的时候搭载的服务器的话可以重装，在重装的时候选择你喜欢的镜像。

有关的环境软件配置在第三点再述

## 2.2域名

域名购买后需要实名下，以及后期需要网站备案

而你最开始拿到手时需要解析下，将你的域名和你的服务器公网绑定下，目的简而言之就是当有人从浏览器输入之后，可以导向你服务器（便利于在你配置好网站及域名后用户能直接像访问baidu.com一样访问到你的网页）

# 3.服务器中软件部署(Java 开发环境)

> 暂时提供两个方法：
>
> 1.登录你的服务器（在你购买的服务器界面就可以登录），然后使用命令部署你的软件环境
>
> 2.使用便捷软件部署你的服务器

## 3.1命令行部署软件

> 两个方法：
>
> 1.命令下载软件并部署
>
> 2.下载好安装包，然后传到服务器再安装

3.1.1命令下载并安装

> 具体方法在此不多说，类似教程很多大体都适用，仅提供我的安装失败经历作为参考想·

- 使用命令下载并安装流程大体无二，但有几点要注意的，安装服务器软件，例如：Tomcat ，Nginx等时，建议使用root身份进行。

  ```java
  >不同类型服务器不太相似，例如：ubuntu 安装完后是使用ubuntu身份登录的，里面的root账户是存在的，只是没有密码，设置完后便可使用，而CentOS中是直接使用root登录的，故问题不大
  
  --修改root密码
  sudo passwd root
  
  --切换用户
  su root
  
  --解压命令（首先得定位到你的压缩文件所在目录）
  	--解压到当前文件夹
  	sudo tar -zxvf 压缩包（后缀应该是.tar.gz）
  	--解压到指定文件夹
  	sudo tar -zxvf 压缩包（后缀应该是.tar.gz）-C /指定路径
  ```

- 使用压缩包

  上传压缩包至服务器（方法是1.4.2中的软件）--->解压文件至指定位置（自定义，例如：tomcat安装可以照着腾讯云的tomcat安装方法，专门设立用户组并安装软件）--->修改配置文件--->检测是否安装成功

## 3.2使用相关便捷软件

3.2.1腾讯云中可以安装宝塔软件

安装方法：具体操作流程腾讯云有安装教程，此处不再赘述

相关经验：

- 对宝塔软件的认知：相对于命令行安装部署项目而言的一个图形界面（当然不仅于此，还有一些监控等功能）
- 部署后可能出现这样那样的问题：
  - [使用宝塔部署站点之后无法访问](https://blog.csdn.net/qq_37591637/article/details/88879536)
  - 设立完站点始终无法访问，这就与我们的2.2中提到的备案有关了，没有备案的话可能解析方面会有影响，但IP访问时没问题的，若IP访问不了则是部署问题或者访问地址的问题

# 4.相关问题及经验之谈

#### 4.1进行以上四步我们基本部署及配置完一个Java后台最基础的设置了，当然还有数据库等等的配置，但都类似。

#### 4.2服务器有个安全组（腾讯云的里面默认将一些端口关闭，这样当你输入IP：端口时会访问不到，这时就需要去安全组里添加许可，最初连习时可以试着一键放通，先学习部署了解熟悉之后再将安全性等等的严格控制）

#### 4.3使用SSH秘钥之后想改使用Password登录，这需要关闭服务器并解绑SSH公钥（若本地下载了xshell，将登录方式由SSH选为Password并删除相关秘钥）

#### 4.4对于端口之类的限制，访问我们的服务器的时候可能存在部分端口访问不了的情况，这时去检查安全组的端口开放，或者去宝塔里面的安全界面开发相应端口

# 5.相关教程链接

- [腾讯云部署Java相关环境](https://blog.csdn.net/xwm1993/article/details/78425393)

