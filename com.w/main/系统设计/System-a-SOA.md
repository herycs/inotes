# SOA

### SOA

- 充分利用现有的基础设施；
- SOA体系结构依赖于消息传递（AMQP，MSMQ）和SOAP作为主要的远程访问协议。
- 快速响应业务变化；

但是其表现并不佳，主要是其太重了，主要体现在：

- SOA更强调系统集成的规范与便利性，对业务服务本身没有过多要求，一般服务拆分粒度不够细，模块间仍然会有比较大的耦合，迭代困难；
- SOA服务之间的通信相对比较复杂，重量级。WebService中常用的SOAP通信协议，通常使用XML格式进行通信，数据冗余，协议过重；EBS通过总线隐藏内部复杂性，其中心化管理模式，系统变更，对系统的影响范围会扩大。
- 在SOA模型下通常只有一个数据库，限制了系统的扩展性；
- 服务化管理和治理设施不完善；

### 微服务

MSA（Micro-Service Archeticture 微服务架构）

`微服务`使用各个子`服务控制模块`的思想代替SOA中的总线。服务控制模块通常至少包含：服务注册与发布、路由、代理。

### SOA&微服务

| SOA        | 微服务                                                       |                                                              |
| :--------- | :----------------------------------------------------------- | ------------------------------------------------------------ |
| 服务粒度   | 粒度较粗                                                     | 细粒度拆分                                                   |
| 部署难度   | 需要重新创建或者部署整个应用                                 | 每个微服务可以独立构建部署                                   |
| 通信开销   | 大部分业务模块在一个应用里面，通信开销低                     | 更多的远程调用，增加了通信开销                               |
| 存储       | 一般所有服务共享数据存储                                     | 每个可以拥有单独的存储                                       |
| 业务易上手 | 需要了解整个应用的业务，上手较难                             | 单服务上手容易，但是服务集群理解比较难(复杂度守恒定律：**业务复杂度不会因为迁移到了微服务而降低**) |
| 通信方式   | SOA体系结构依赖于消息传递（AMQP，MSMQ）和SOAP作为主要的远程访问协议，协议偏重量级； | 使用轻量级协议，如HTTP/REST                                  |
| 可扩展性   | 难以扩展                                                     | 使用容器技术很方便扩展                                       |

> 参考博客：[博客园，java架构杂谈](https://www.cnblogs.com/arthinking/p/12812786.html)

